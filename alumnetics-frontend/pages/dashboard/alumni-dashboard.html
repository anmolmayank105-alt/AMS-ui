<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alumni Dashboard - ALUMNETICS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease-out;
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .nav-item {
            transition: all 0.2s ease;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #667eea;
        }

        /* Animated background patterns */
        .animated-bg {
            position: relative;
            overflow: hidden;
        }

        .animated-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1529390079861-591de354faf5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80') center/cover;
            opacity: 0.1;
            z-index: 0;
        }

        .animated-bg .floating-shape {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .animated-bg .floating-shape:nth-child(1) {
            width: 100px;
            height: 100px;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .animated-bg .floating-shape:nth-child(2) {
            width: 60px;
            height: 60px;
            top: 60%;
            right: 20%;
            animation-delay: -2s;
        }

        .animated-bg .floating-shape:nth-child(3) {
            width: 80px;
            height: 80px;
            bottom: 20%;
            left: 70%;
            animation-delay: -4s;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.7;
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
                opacity: 1;
            }
        }

        /* Chart animations */
        @keyframes progressBar {
            from { width: 0%; }
            to { width: var(--width); }
        }

        .progress-bar {
            animation: progressBar 2s ease-out;
        }

        @keyframes pieChart {
            from { stroke-dasharray: 0 100; }
            to { stroke-dasharray: var(--progress) 100; }
        }

        .pie-segment {
            animation: pieChart 2s ease-out;
        }
    </style>
</head>
<body class="animated-bg relative">
    <!-- Main Layout Container -->
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-white/90 backdrop-blur-md border-r border-white/20 shadow-xl flex flex-col">
            <!-- Logo Section -->
            <div class="p-6 border-b border-white/20">
                <div class="flex items-center space-x-3">
                    <img src="../../assets/images/logo.jpeg" alt="AlumNetics logo" class="w-10 h-10 rounded-xl object-cover shadow-lg border border-white/40">
                    <h1 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">ALUMNETICS</h1>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 p-4">
                <ul class="space-y-2">
                    <li>
                        <a href="#" class="nav-item active flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 21v-4a2 2 0 012-2h4a2 2 0 012 2v4"></path>
                            </svg>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="student-network.html" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                            </svg>
                            <span>Students Network</span>
                        </a>
                    </li>
                    <li>
                        <a href="job-postings.html" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m8 0h2a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h2"></path>
                            </svg>
                            <span>Job Postings</span>
                        </a>
                    </li>
                    <li>
                        <a href="../events/index.html" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            <span>Events</span>
                        </a>
                    </li>
                    <li>
                        <a href="mentorship.html" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                            <span>Mentorship</span>
                        </a>
                    </li>
                    <li>
                        <a href="student-profile.html" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            <span>Profile</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- User Profile Section -->
            <div class="p-4 border-t border-white/20">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold shadow-lg">
                        <span>JD</span>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-semibold text-gray-800">John Doe</p>
                        <p class="text-xs text-gray-600">Computer Science</p>
                    </div>
                </div>
                <button onclick="handleLogout()" class="w-full py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-200 font-medium shadow-lg text-sm">
                    Logout
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Top Header -->
            <header class="bg-white/90 backdrop-blur-md border-b border-white/20 shadow-lg p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <h2 class="text-2xl font-bold text-gray-800">Alumni Dashboard</h2>
                        <span class="text-sm text-gray-500">Welcome back!</span>
                    </div>

                    <!-- Notifications -->
                    <div class="flex items-center space-x-3">
                        <button class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all duration-200 backdrop-blur-sm">
                            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-3.5-3.5a5.5 5.5 0 100-11L21 7h-5M9 12l2 2 4-4"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Scrollable Content Area -->
            <div class="flex-1 overflow-y-auto p-6 space-y-6 relative">
                <!-- Floating shapes for animation -->
                <div class="floating-shape"></div>
                <div class="floating-shape"></div>
                <div class="floating-shape"></div>

                <!-- Welcome Banner -->
                <div class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-3xl shadow-2xl border border-white/20 p-8 text-white animate-fadeInUp relative overflow-hidden">
                    <!-- Decorative pattern -->
                    <div class="absolute inset-0 opacity-20">
                        <div class="grid grid-cols-12 gap-2 p-4">
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                            <div class="w-1 h-1 bg-white rounded-full"></div>
                        </div>
                    </div>
                    <div class="relative z-10">
                        <h2 class="text-4xl font-bold mb-4">Welcome back, John! 👋</h2>
                        <p class="text-xl text-purple-100 mb-6">Ready to connect with your alumni network today?</p>
                        <div class="flex flex-wrap gap-4">
                            <div class="flex items-center space-x-2 bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2">
                                <span class="text-2xl">�</span>
                                <span id="userInstitutionBadge" class="text-sm font-medium">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Search Section -->
                <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 p-6 animate-fadeInUp" style="animation-delay: 0.05s">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">🔍 Search Alumni & Students</h3>
                    <p class="text-sm text-gray-600 mb-4">Find students and alumni from your university</p>
                    
                    <div class="flex gap-4 mb-4">
                        <div class="flex-1 relative">
                            <input
                                type="text"
                                id="searchInput"
                                placeholder="Search by name, department, graduation year..."
                                class="w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"
                                onkeyup="handleSearchKeyPress(event)"
                            />
                            <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </div>
                        <select id="roleFilter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="">All Roles</option>
                            <option value="student">Students</option>
                            <option value="alumni">Alumni</option>
                        </select>
                        <button onclick="performSearch()" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg">
                            Search
                        </button>
                    </div>

                    <!-- Search Results -->
                    <div id="searchResults" class="hidden">
                        <div class="flex items-center justify-between mb-4 pb-2 border-b border-gray-200">
                            <h4 class="font-semibold text-gray-900">Search Results</h4>
                            <button onclick="clearSearch()" class="text-sm text-gray-600 hover:text-gray-900">Clear</button>
                        </div>
                        <div id="searchResultsContainer" class="space-y-3 max-h-96 overflow-y-auto">
                            <!-- Results will be populated here -->
                        </div>
                    </div>

                    <!-- No Results Message -->
                    <div id="noResults" class="hidden text-center py-8 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <p>No users found from your university</p>
                    </div>

                    <!-- Loading State -->
                    <div id="searchLoading" class="hidden text-center py-8">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
                        <p class="mt-4 text-gray-600">Searching...</p>
                    </div>
                </div>

                <!-- Quick Action Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fadeInUp" style="animation-delay: 0.1s">
            <div class="bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20 hover:shadow-2xl hover:scale-105 transition-all duration-300 card-hover">
                <div class="flex items-center space-x-4 mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">Join Events</h3>
                <p class="text-gray-600 text-sm mb-4">Participate in networking events and workshops</p>
                <button onclick="window.location.href='../events/index.html'" class="w-full py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-200">Browse Events</button>
            </div>

            <div class="bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20 hover:shadow-2xl hover:scale-105 transition-all duration-300 card-hover">
                <div class="flex items-center space-x-4 mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                        </svg>
                    </div>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">Send Messages</h3>
                <p class="text-gray-600 text-sm mb-4">Reach out to alumni and build connections</p>
                <button onclick="window.location.href='confirmed 9 messages.html'" class="w-full py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-medium hover:from-purple-600 hover:to-pink-600 transition-all duration-200">Message</button>
            </div>

            <div class="bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20 hover:shadow-2xl hover:scale-105 transition-all duration-300 card-hover">
                <div class="flex items-center space-x-4 mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">Update Profile</h3>
                <p class="text-gray-600 text-sm mb-4">Keep your information current and discoverable</p>
                        <button onclick="window.location.href='student-profile.html'" class="w-full py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-medium hover:from-orange-600 hover:to-red-600 transition-all duration-200">Edit Profile</button>
                    </div>
                </div>

                <!-- Analytics and Graphs Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fadeInUp" style="animation-delay: 0.2s">
                    <!-- Network Growth Chart -->
                    <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 p-6 card-hover">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-gray-900">📈 Network Growth</h3>
                                <p class="text-gray-600 text-sm">Your connections over time</p>
                            </div>
                        </div>
                        
                        <!-- Simple Bar Chart -->
                        <div id="networkGrowthChart" class="space-y-4">
                            <!-- Empty state for new users -->
                            <div class="text-center py-8">
                                <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                                </svg>
                                <p class="text-gray-500 font-medium">No connections yet</p>
                                <p class="text-gray-400 text-sm mt-2">Start connecting with alumni to see your network grow!</p>
                            </div>
                        </div>

                        <div id="networkGrowthMessage" class="mt-6 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl border border-blue-100">
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span class="text-sm font-medium text-blue-800">Build your network by connecting with alumni</span>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Pie Chart -->
                    <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 p-6 card-hover">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-gray-900">🎯 Activity Breakdown</h3>
                                <p class="text-gray-600 text-sm">Your platform engagement</p>
                            </div>
                        </div>

                        <!-- Empty State for Activity -->
                        <div id="activityBreakdown" class="text-center py-8">
                            <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                            </svg>
                            <p class="text-gray-500 font-medium">No activity yet</p>
                            <p class="text-gray-400 text-sm mt-2">Start using the platform to see your activity stats!</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Achievements Section -->
                <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 p-6 animate-fadeInUp card-hover" style="animation-delay: 0.3s">
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-10 h-10 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-900">🏆 Recent Achievements</h3>
                            <p class="text-gray-600 text-sm">Your latest milestones and accomplishments</p>
                        </div>
                    </div>

                    <!-- Empty State for Achievements -->
                    <div id="achievementsSection" class="text-center py-12">
                        <svg class="w-20 h-20 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                        </svg>
                        <h4 class="text-lg font-semibold text-gray-600 mb-2">No Achievements Yet</h4>
                        <p class="text-gray-500">Start connecting, attending events, and messaging alumni to unlock achievements!</p>
                    </div>
                </div>        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Alumni Connections -->
            <div class="lg:col-span-2 bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 p-6 animate-fadeInUp" style="animation-delay: 0.3s">
                <div class="flex items-center space-x-3 mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">🎓 Recent Student and Alumni Connections</h3>
                        <p class="text-gray-600 text-sm">Connect with fellow graduates and students</p>
                    </div>
                </div>

                <div class="space-y-4" id="alumniCardsContainer">
                    <!-- Alumni cards will be loaded dynamically from API -->
                </div>

                <button class="w-full mt-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg">
                    View All Alumni
                </button>
            </div>

            <!-- Upcoming Events -->
            <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 p-6 animate-fadeInUp" style="animation-delay: 0.4s">
                <div class="flex items-center space-x-3 mb-6">
                    <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">📅 Upcoming Events</h3>
                        <p class="text-gray-600 text-sm">Don't miss these opportunities</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <!-- Event 1 -->
                    <div class="border-l-4 border-green-500 pl-4 py-2">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-semibold text-gray-900">Alumni Networking Night</h3>
                            <span class="text-xs font-medium bg-green-100 text-green-700 px-2 py-1 rounded-full">Dec 15</span>
                        </div>
                        <div class="flex items-center space-x-2 text-sm text-gray-600 mb-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <span>Grand Hotel, Delhi</span>
                        </div>
                        <div class="flex items-center space-x-2 text-sm text-gray-600">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                            </svg>
                            <span>45 attending</span>
                        </div>
                    </div>

                    <!-- Event 2 -->
                    <div class="border-l-4 border-blue-500 pl-4 py-2">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-semibold text-gray-900">Career Fair 2024</h3>
                            <span class="text-xs font-medium bg-blue-100 text-blue-700 px-2 py-1 rounded-full">Dec 20</span>
                        </div>
                        <div class="flex items-center space-x-2 text-sm text-gray-600 mb-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <span>Main Auditorium</span>
                        </div>
                        <div class="flex items-center space-x-2 text-sm text-gray-600">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                            </svg>
                            <span>120 attending</span>
                        </div>
                    </div>

                    <!-- Event 3 -->
                    <div class="border-l-4 border-purple-500 pl-4 py-2">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-semibold text-gray-900">Tech Talk Series</h3>
                            <span class="text-xs font-medium bg-purple-100 text-purple-700 px-2 py-1 rounded-full">Jan 5</span>
                        </div>
                        <div class="flex items-center space-x-2 text-sm text-gray-600 mb-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            <span>Virtual Event</span>
                        </div>
                        <div class="flex items-center space-x-2 text-sm text-gray-600">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                            </svg>
                            <span>85 attending</span>
                        </div>
                    </div>
                </div>

                <button onclick="window.location.href='../events/index.html'" class="w-full mt-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg">
                    View All Events
                </button>
            </div>
        </div>

        <!-- Network Stats - Bottom Rectangular Section -->
        <div class="bg-gradient-to-r from-cyan-600 to-blue-600 rounded-3xl shadow-2xl border border-white/20 p-8 animate-fadeInUp relative overflow-hidden" style="animation-delay: 0.5s">
            <!-- Decorative pattern -->
            <div class="absolute inset-0 opacity-10">
                <div class="grid grid-cols-8 gap-4 p-4">
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                    <div class="w-2 h-2 bg-white rounded-full"></div>
                </div>
            </div>
            <div class="flex items-center space-x-3 mb-8 relative z-10">
                <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-white">📊 Your Network Stats</h3>
                    <p class="text-cyan-100 text-sm">Overview of your activities and connections</p>
                </div>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 relative z-10">
                <div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 hover:bg-white/20 transition-all duration-300">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-1">24</div>
                    <div class="text-sm text-cyan-100">Alumni Connections</div>
                </div>
                <div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 hover:bg-white/20 transition-all duration-300">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-1">8</div>
                    <div class="text-sm text-cyan-100">Events Attended</div>
                </div>
                <div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 hover:bg-white/20 transition-all duration-300">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-1">142</div>
                    <div class="text-sm text-cyan-100">Messages Sent</div>
                </div>
                <div class="text-center p-6 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 hover:bg-white/20 transition-all duration-300">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                    </div>
                    <div class="text-3xl font-bold text-white mb-1">67</div>
                    <div class="text-sm text-cyan-100">Profile Views</div>
                </div>
            </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Button -->
    <div class="fixed bottom-6 right-6">
        <button class="w-12 h-12 bg-gradient-to-br from-purple-600 to-blue-600 text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 backdrop-blur-sm">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </button>
    </div>

    <!-- Include API configuration, service and utilities -->
    <script src="../../assets/js/config.js"></script>
    <script src="../../assets/js/api-service.js"></script>
    <script src="../../assets/js/utils.js"></script>
    
    <script>
        // Global variables for user data
        let currentUser = null;
        let userConnections = [];
        let userEvents = [];
        let userStats = {
            connections: 0,
            events: 0,
            messages: 0,
            profileViews: 0
        };

        // Initialize dashboard when everything is loaded
        function initDashboard() {
            console.log('Initializing dashboard...');
            
            // Check if API is loaded
            if (typeof window.AlumNeticsAPI === 'undefined') {
                console.log('Waiting for AlumNeticsAPI to load...');
                setTimeout(initDashboard, 100);
                return;
            }

            // Check authentication
            const token = localStorage.getItem('authToken');
            const userData = localStorage.getItem('userData');
            
            if (!token || !userData) {
                console.log('Not authenticated');
                window.location.href = '../auth/login.html';
                return;
            }

            // Load user data
            loadDashboardData();
        }

        // Start initialization when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initDashboard);
        } else {
            initDashboard();
        }

        function loadDashboardData() {
            try {
                console.log('Loading dashboard data...');
                
                // Get user from localStorage
                const userDataString = localStorage.getItem('userData');
                if (!userDataString) {
                    window.location.href = '../auth/login.html';
                    return;
                }

                currentUser = JSON.parse(userDataString);
                console.log('Current user:', currentUser);
                
                // Update UI with user data
                updateUserProfile(currentUser);
                
                console.log('Dashboard loaded successfully!');

                // Fetch real events from backend
                fetchUpcomingEvents();

            } catch (error) {
                console.error('Error loading dashboard data:', error);
                alert('Failed to load user data');
                window.location.href = '../auth/login.html';
            }
        }

        // Fetch upcoming events from backend
        async function fetchUpcomingEvents() {
            try {
                console.log('Fetching upcoming events from backend...');
                const response = await window.AlumNeticsAPI.getEvents({ 
                    status: 'published',
                    limit: 3,
                    sort: 'startDate'
                });
                
                console.log('Events response:', response);
                
                // Handle different response structures
                let events = [];
                if (response && response.success) {
                    if (response.data && response.data.events) {
                        events = response.data.events;
                    } else if (response.data && Array.isArray(response.data)) {
                        events = response.data;
                    } else if (Array.isArray(response.events)) {
                        events = response.events;
                    }
                }
                
                console.log('Processed events:', events);
                
                if (events.length > 0) {
                    // Update userEvents
                    userEvents = events.slice(0, 3); // Show only first 3
                    updateEventsSection(userEvents);
                    updateDashboardStats();
                } else {
                    console.log('No published events found');
                }
                
            } catch (error) {
                console.error('Error fetching events:', error);
                // Don't show error to user, just log it
            }
        }

        function updateUserProfile(user) {
            console.log('Updating profile with user:', user);
            
            const firstName = user.fullName ? user.fullName.split(' ')[0] : 'Student';
            const lastName = user.fullName ? user.fullName.split(' ').slice(1).join(' ') : '';
            
            // Update user name in sidebar
            const userNameElements = document.querySelectorAll('.text-sm.font-semibold.text-gray-800');
            userNameElements.forEach(el => {
                if (el.textContent === 'John Doe') {
                    el.textContent = user.fullName || 'Student';
                }
            });

            // Update user department
            const departmentElements = document.querySelectorAll('.text-xs.text-gray-600');
            departmentElements.forEach(el => {
                if (el.textContent === 'Computer Science') {
                    el.textContent = user.department || user.role || 'Student';
                }
            });

            // Update welcome message
            const welcomeElements = document.querySelectorAll('h2');
            welcomeElements.forEach(el => {
                if (el.textContent.includes('Welcome back, John!')) {
                    el.textContent = `Welcome back, ${firstName}! 👋`;
                }
            });

            // Update institution badge
            const instBadge = document.getElementById('userInstitutionBadge');
            if (instBadge) {
                instBadge.textContent = user.institution?.name || user.institution || 'University';
            }

            // Update user initials in avatar
            const avatarElement = document.querySelector('.bg-gradient-to-br.from-purple-500.to-blue-600 span');
            if (avatarElement) {
                const initials = firstName.charAt(0) + (lastName.charAt(0) || '');
                avatarElement.textContent = initials.toUpperCase();
            }
        }

        function updateConnectionsSection(connections) {
            const connectionsContainer = document.querySelector('.lg\\:col-span-2 .space-y-4');
            if (!connectionsContainer) return;

            connectionsContainer.innerHTML = '';

            connections.forEach((connection, index) => {
                const gradients = [
                    'from-blue-50 to-purple-50 border-blue-100/50',
                    'from-green-50 to-blue-50 border-green-100/50',
                    'from-purple-50 to-pink-50 border-purple-100/50'
                ];

                const avatarGradients = [
                    'from-blue-500 to-purple-600',
                    'from-green-500 to-blue-600',
                    'from-purple-500 to-pink-600'
                ];

                const buttonColors = [
                    'text-purple-600 border-purple-200 hover:bg-purple-50',
                    'text-green-600 border-green-200 hover:bg-green-50',
                    'text-purple-600 border-purple-200 hover:bg-purple-50'
                ];

                const initials = (connection.firstName?.charAt(0) || '') + (connection.lastName?.charAt(0) || '');
                const currentGradient = gradients[index % gradients.length];
                const currentAvatarGradient = avatarGradients[index % avatarGradients.length];
                const currentButtonColor = buttonColors[index % buttonColors.length];

                const connectionElement = document.createElement('div');
                connectionElement.className = `flex items-center justify-between p-4 bg-gradient-to-r ${currentGradient} rounded-xl hover:shadow-lg transition-all duration-300 border`;
                connectionElement.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-gradient-to-br ${currentAvatarGradient} rounded-full flex items-center justify-center text-white font-semibold shadow-lg">
                            <span>${initials}</span>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-900">${connection.firstName} ${connection.lastName}</h4>
                            <p class="text-sm text-gray-600">${connection.professional?.currentPosition || 'Student'} ${connection.professional?.company ? 'at ' + connection.professional.company : ''}</p>
                            <p class="text-xs text-gray-500">${connection.academic?.department || 'Computer Science'}, Class of ${connection.academic?.graduationYear || '2023'}</p>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="connectWithUser('${connection._id}')" class="px-4 py-2 bg-white/80 backdrop-blur-sm ${currentButtonColor} border rounded-xl transition-all duration-200 text-sm font-medium">
                            Connect
                        </button>
                        <button onclick="messageUser('${connection._id}')" class="p-2 bg-white/80 backdrop-blur-sm text-gray-600 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all duration-200">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                        </button>
                    </div>
                `;
                connectionsContainer.appendChild(connectionElement);
            });
        }

        function updateEventsSection(events) {
            const eventsContainer = document.querySelector('.bg-white\\/90.backdrop-blur-md.rounded-2xl.shadow-xl.border.border-white\\/20.p-6.animate-fadeInUp .space-y-4');
            if (!eventsContainer) return;

            eventsContainer.innerHTML = '';
            
            // Default images by event type
            const defaultImages = {
                'reunion': 'https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=400&h=200&fit=crop',
                'networking': 'https://images.unsplash.com/photo-1511578314322-379afb476865?w=400&h=200&fit=crop',
                'workshop': 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400&h=200&fit=crop',
                'seminar': 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400&h=200&fit=crop',
                'career-fair': 'https://images.unsplash.com/photo-1521737711867-e3b97375f902?w=400&h=200&fit=crop',
                'fundraising': 'https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=400&h=200&fit=crop',
                'social': 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=400&h=200&fit=crop',
                'other': 'https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=400&h=200&fit=crop'
            };

            events.forEach((event, index) => {
                const borderColors = ['border-green-500', 'border-blue-500', 'border-purple-500'];
                const badgeColors = [
                    'bg-green-100 text-green-700',
                    'bg-blue-100 text-blue-700', 
                    'bg-purple-100 text-purple-700'
                ];

                const currentBorderColor = borderColors[index % borderColors.length];
                const currentBadgeColor = badgeColors[index % badgeColors.length];
                
                const eventDate = new Date(event.startDate);
                const formattedDate = eventDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                
                // Get event image - check for valid image URL
                let eventImage = null;
                if (event.coverImage && typeof event.coverImage === 'object' && event.coverImage.url) {
                    eventImage = event.coverImage.url;
                } else if (event.coverImage && typeof event.coverImage === 'string' && event.coverImage.trim()) {
                    eventImage = event.coverImage;
                } else if (event.imageUrl && typeof event.imageUrl === 'string' && event.imageUrl.trim()) {
                    eventImage = event.imageUrl;
                }
                
                // Use default image if no image found
                if (!eventImage) {
                    eventImage = defaultImages[event.eventType] || defaultImages['other'];
                }

                const eventElement = document.createElement('div');
                eventElement.className = `border-l-4 ${currentBorderColor} pl-4 py-2`;
                
                // Build HTML with image (always show image now)
                let eventHTML = `
                    <div class="mb-3 rounded-lg overflow-hidden">
                        <img src="${eventImage}" alt="${event.title}" class="w-full h-32 object-cover" onerror="this.src='${defaultImages['other']}'">
                    </div>
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="font-semibold text-gray-900">${event.title}</h3>
                        <span class="text-xs font-medium ${currentBadgeColor} px-2 py-1 rounded-full">${formattedDate}</span>
                    </div>
                    <div class="flex items-center space-x-2 text-sm text-gray-600 mb-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <span>${event.location || 'Virtual Event'}</span>
                    </div>
                    <div class="flex items-center space-x-2 text-sm text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                        </svg>
                        <span>${event.attendees?.length || 0} attending</span>
                    </div>
                `;
                
                eventElement.innerHTML = eventHTML;
                eventsContainer.appendChild(eventElement);
            });
        }

        function updateDashboardStats() {
            // Update network stats - show 0 for new users
            userStats.connections = userConnections.length;
            userStats.events = userEvents.length;
            userStats.messages = 0; // Will be updated when messaging feature is implemented
            userStats.profileViews = 0; // Will be updated when analytics are implemented

            // Update stats display
            const statsElements = document.querySelectorAll('.text-3xl.font-bold.text-white');
            if (statsElements.length >= 4) {
                statsElements[0].textContent = userStats.connections;
                statsElements[1].textContent = userStats.events;
                statsElements[2].textContent = userStats.messages;
                statsElements[3].textContent = userStats.profileViews;
            }
        }

        async function connectWithUser(userId) {
            try {
                AlumNeticsUtils.showToast('Connection request sent!', 'success');
                // You can implement actual connection logic here
                // const response = await AlumNeticsAPI.connectWithUser(userId);
            } catch (error) {
                console.error('Error connecting with user:', error);
                AlumNeticsUtils.showToast('Failed to send connection request', 'error');
            }
        }

        async function messageUser(userId) {
            try {
                // Redirect to messages page with user ID
                window.location.href = `confirmed 9 messages.html?userId=${userId}`;
            } catch (error) {
                console.error('Error navigating to messages:', error);
                AlumNeticsUtils.showToast('Failed to open messages', 'error');
            }
        }

        async function handleLogout() {
            try {
                await AlumNeticsAPI.logout();
                // Clear local storage
                localStorage.removeItem('authToken');
                localStorage.removeItem('refreshToken');
                localStorage.removeItem('userData');
                // Redirect to login page
                window.location.href = '../auth/login.html';
            } catch (error) {
                console.error('Logout error:', error);
                // Clear local storage even on error
                localStorage.removeItem('authToken');
                localStorage.removeItem('refreshToken');
                localStorage.removeItem('userData');
                window.location.href = '../auth/login.html';
            }
        }

        // Setup navigation functionality
        function setupNavigation() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    // Only block default when link is an in-page placeholder
                    if (!href || href === '#') {
                        e.preventDefault();
                    }
                    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Update logout button
            const logoutButton = document.querySelector('button[onclick="window.location.href=\'confirmed 2 login page.html\'"]');
            if (logoutButton) {
                logoutButton.onclick = handleLogout;
            }
        }

        // Setup animations
        function setupAnimations() {
            window.addEventListener('scroll', function() {
                const elements = document.querySelectorAll('.animate-fadeInUp');
                elements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;
                    
                    if (elementTop < window.innerHeight - elementVisible) {
                        element.classList.add('animate-fadeInUp');
                    }
                });
            });
        }

        // Setup card hover effects
        function setupCardHovers() {
            document.querySelectorAll('.card-hover').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        }

        // Hide demo content and show empty states for new users
        function showEmptyStates() {
            // Hide all demo alumni cards
            const alumniCards = document.querySelectorAll('.lg\\:col-span-2 .space-y-4 > div');
            alumniCards.forEach(card => card.style.display = 'none');
            
            // Show empty state message
            const alumniContainer = document.querySelector('.lg\\:col-span-2 .space-y-4');
            if (alumniContainer) {
                alumniContainer.innerHTML = `
                    <div class="text-center py-12">
                        <svg class="w-20 h-20 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"></path>
                        </svg>
                        <h4 class="text-lg font-semibold text-gray-600 mb-2">No Connections Yet</h4>
                        <p class="text-gray-500">Start connecting with alumni from your institution!</p>
                        <button onclick="window.location.href='../network/alumni-network.html'" class="mt-4 px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all">
                            Find Alumni
                        </button>
                    </div>
                `;
            }
            
            // Hide all demo events
            const eventsContainer = document.querySelectorAll('.bg-white\\/90 .space-y-4 > div[class*="border-l-4"]');
            eventsContainer.forEach(event => event.style.display = 'none');
            
            // Show empty events message
            const eventsSection = document.querySelector('.animate-fadeInUp[style*="0.4s"] .space-y-4');
            if (eventsSection) {
                eventsSection.innerHTML = `
                    <div class="text-center py-12">
                        <svg class="w-20 h-20 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <h4 class="text-lg font-semibold text-gray-600 mb-2">No Upcoming Events</h4>
                        <p class="text-gray-500">Check back later for networking events and workshops!</p>
                    </div>
                `;
            }
            
            // Update stats to show 0 for new users
            updateDashboardStats();
        }
        
        // Call empty states after user data is loaded
        setTimeout(showEmptyStates, 100);
    </script>

    <!-- Search Functionality -->
    <script>
        async function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const roleFilter = document.getElementById('roleFilter');
            const searchResults = document.getElementById('searchResults');
            const searchResultsContainer = document.getElementById('searchResultsContainer');
            const noResults = document.getElementById('noResults');
            const searchLoading = document.getElementById('searchLoading');
            
            const query = searchInput.value.trim();
            
            if (query.length < 2) {
                alert('Please enter at least 2 characters to search');
                return;
            }
            
            // Show loading
            searchLoading.classList.remove('hidden');
            searchResults.classList.add('hidden');
            noResults.classList.add('hidden');
            
            try {
                // Build search URL
                let searchUrl = `/users/search?q=${encodeURIComponent(query)}`;
                if (roleFilter.value) {
                    searchUrl += `&role=${roleFilter.value}`;
                }
                
                const response = await window.AlumNeticsAPI.makeRequest('GET', searchUrl);
                
                console.log('Search response:', response);
                console.log('Users array:', response.data?.users);
                
                searchLoading.classList.add('hidden');
                
                if (response.success && response.data.users && response.data.users.length > 0) {
                    console.log('Found users:', response.data.users.length);
                    displaySearchResults(response.data.users);
                    searchResults.classList.remove('hidden');
                } else {
                    noResults.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Search error:', error);
                searchLoading.classList.add('hidden');
                alert('Search failed. Please try again.');
            }
        }
        
        function displaySearchResults(users) {
            console.log('Displaying search results:', users);
            const container = document.getElementById('searchResultsContainer');
            container.innerHTML = users.map((user, index) => {
                console.log(`User ${index}:`, user);
                console.log(`User ${index} ID:`, user._id);
                const userId = user._id || user.id;
                console.log(`User ${index} final ID:`, userId);
                
                return `
                <div class="flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl hover:shadow-lg transition-all duration-300 border border-blue-100/50">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg shadow-lg">
                            ${(user.fullName || user.firstName || 'U').charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <div class="font-semibold text-gray-900">${user.fullName || `${user.firstName || ''} ${user.lastName || ''}`.trim() || 'Unknown User'}</div>
                            <div class="text-sm text-gray-600 flex items-center gap-2">
                                <span class="px-2 py-0.5 rounded-full text-xs font-medium ${user.role === 'student' ? 'bg-blue-100 text-blue-700' : 'bg-purple-100 text-purple-700'}">${user.role || 'User'}</span>
                                ${user.department ? `<span>• ${user.department}</span>` : ''}
                                ${user.graduationYear ? `<span>• Class of ${user.graduationYear}</span>` : ''}
                            </div>
                            ${user.institution?.name ? `<div class="text-xs text-gray-500 mt-1">🏢 ${user.institution.name}</div>` : ''}
                        </div>
                    </div>
                    <button class="view-profile-btn px-4 py-2 bg-white border border-blue-200 text-blue-600 rounded-lg text-sm font-medium hover:bg-blue-50 transition-all duration-200" data-user-id="${userId}">
                        View Profile
                    </button>
                </div>
                `;
            }).join('');
            
            // Add event listeners to all view profile buttons
            document.querySelectorAll('.view-profile-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const userId = this.getAttribute('data-user-id');
                    viewUserProfile(userId);
                });
            });
        }
        
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('roleFilter').value = '';
            document.getElementById('searchResults').classList.add('hidden');
            document.getElementById('noResults').classList.add('hidden');
        }
        
        function handleSearchKeyPress(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        }
        
        function viewUserProfile(userId) {
            console.log('=== viewUserProfile CALLED ===');
            console.log('Received userId:', userId);
            console.log('Type of userId:', typeof userId);
            
            if (!userId || userId === 'undefined' || userId === 'null' || String(userId) === 'undefined') {
                console.error('Invalid user ID:', userId);
                alert('Error: Unable to view profile. User ID is missing: ' + userId);
                return;
            }
            
            // Store user ID in sessionStorage as backup
            sessionStorage.setItem('viewingUserId', userId);
            
            // Navigate to the NEW public profile viewer page
            const profileUrl = `/pages/profile/view-profile.html?id=${encodeURIComponent(userId)}`;
            console.log('Navigating to:', profileUrl);
            console.log('Full URL:', window.location.origin + profileUrl);
            console.log('Also stored in sessionStorage:', userId);
            
            // Use window.location.href to navigate
            window.location.href = profileUrl;
        }
    </script>

<script src="../../assets/js/chatbot.js"></script>
</body>
</html>
